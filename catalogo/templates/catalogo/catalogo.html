{% extends "catalogo/base.html" %}
{% load static %}
{% block content %}

<h2 id="titulo-catalogo" class="titulo-catalogo">ğŸ¬ Mi CatÃ¡logo</h2>

<div id="buscador" class="search-box">
    <form method="get" id="form-busqueda">
        <input id="campo-busqueda" type="text" name="q" placeholder="Buscar..." value="{{ request.GET.q }}">
    </form>
</div>

{% if items %}
<div id="catalogo-grid" class="catalogo-grid">
    {% for item in items %}
        <div id="card-{{ item.id }}" class="catalogo-card">
            
            <!-- ğŸ—‘ï¸ Icono de eliminar -->
            <a href="{% url 'eliminar_item' item.id %}" class="delete-icon" title="Eliminar">
                ğŸ—‘ï¸
            </a>

            <div id="imagen-contenedor-{{ item.id }}" class="imagen-contenedor">
                {% if item.imagen %}
                    <img id="imagen-{{ item.id }}" src="{{ item.imagen.url }}" alt="{{ item.nombre }}">
                {% else %}
                    <img id="imagen-{{ item.id }}" src="https://via.placeholder.com/300x400?text=Sin+Imagen" alt="Sin imagen">
                {% endif %}
                <span id="etiqueta-tipo-{{ item.id }}" class="etiqueta-tipo">
                    {% if item.tipo == "Pelicula" %}ğŸ¬ PelÃ­cula
                    {% elif item.tipo == "Serie" %}ğŸ“º Serie
                    {% else %}ğŸ“š Libro{% endif %}
                </span>
            </div>

            <div id="info-card-{{ item.id }}" class="info-card">
                <h3 id="nombre-item-{{ item.id }}">{{ item.nombre }}</h3>
                <a id="btn-visto-{{ item.id }}" href="{% url 'marcar_visto' item.id %}" class="btn-visto">
                    {% if item.visto %}âœ” Marcado como visto{% else %}ğŸ‘ï¸ Marcar como visto{% endif %}
                </a>
            </div>
        </div>
    {% endfor %}
</div>
{% else %}
    <p id="sin-items" class="sin-items">ğŸ“­ No hay elementos en tu catÃ¡logo todavÃ­a. Usa el botÃ³n â€œAgregarâ€ para aÃ±adir uno.</p>
{% endif %}

{% endblock %}